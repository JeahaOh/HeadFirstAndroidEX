# Started Service
앱이 포커스를 가지고 있든 없든 항상 실행되야 하는 동작이 있음.  
예를 들어 파일을 내려받기중에 다른 앱으로 이동하더라도 시작된 내려받기는 이어지기를 원할 수도 있음.  
이번에는 백그라운드에서 동작을 실행하는 컴포넌트인 Started Servies를 공부해 보자.  
IntentService 클래스로 시작된 서비스를 생성하고 시작된 서비스의 생명주기는 액티비티와 어떤 관계를 갖는지 살펴 보자.  
또한 서비스를 실행하면서 메세지를 기록해서 이를 사용자에게 안드로이드 내장 알림 서비스로 통지하는 방법도 알아보자.

## 서비스는 백그라운드에서 작동함.
안드로이드 앱은 여러 액티비티와 다른 컴포넌트로 이루어 짐.  
앱에는 사용자와 상호작용하는 코드가 포함되어 있는데 때로는 큰 파일 내려받기, 음악 스트리밍, 서버 메시지 수신 등 백그라운드에서 작동해야 하는 기능도 있음.  
액티비티는 이런 종류의 작업을 수행하는 데 적합하지 않음.  
단순한 작업이면 스레드를 생성해 이런 기능을 수행할 수 있지만 액티비티 코드가 복잡해 지지 않도록 주의 해야함.  
그런 이유로 안드로이드는 서비스라는 기능을 제공함.  
서비스는 액티비티 같은 애플리케이션 컴포넌트지만 액티비티와 달리 사용자 인터페이스가 없음.  
서비스느 액티비티에 비해 단순한 생명주기를 갖고 있으며, 사용자가 다른 일을 하는 동안 백그라운드로 작업을 처리하는 코드를 쉽게 수현할 수 있게 도와주는 많은 기능이 있음.  
  
직접 서비스를 구현하는 것뿐 아니라 안드로이드 내장 서비스를 이용하는 방법도 있음.  
알림 서비스, 위치 서비스, 내려받기 등의 내장 서비스가 있음.

## 서비스 유형
1. 시작된 서비스
    시작된 서비스는 백그라운드에서 무한히 실행됨. 심지어 자신을 시작시킨 액티비티가 종료되어도 실행 상태가 유지됨. 인터넷에서 큰 파일을 내려받을 때 시작된 서비스를 이용할 수 있음. 작업이 끝나면 서비스가 중지됨.
2. 바운드 서비스
    바운드 서비스는 액티비티 같은 다른 애플리케이션의 컴포넌트에 연결됨. 액티비티는 바운드 서비스와 상호작용하면서 요청을 보내거나 결과를 받을 수 있음. 바운드 서비스는 연결된 컴포넌트가 실행되는 동안 존재함. 컴포넌트와 연결되지 않으면 바운드 서비스는 종료됨. 예를 들어 바운드 서비스를 이용해 자동차으 이디오 거리를 측정하는 주행 기록셰를 만들 수 있음. 이런 식으로 서비스에 연결된 모든 액티비티는 서비스로부터 여행한 거리 정보를 얻을 수 있음.
3. 계획된 서비스
    특정 시간에 실행되도록 계획된 서비스. API 21부터는 특정 시간에 어떤 작업이 실행되도록 계획할 수 있음.

## 핵심 정리
- 서비스는 태스크를 백그라운드로 실행할 수 있는 애플리케이션 컴포넌트임.  
  사용자는 인터페이스를 포함하지 않음.
- 시작된 서비스는 백그라운드에서 무한정 실행할 수 있으며,  
  심지어 서비스를 실행한 액티비티가 종료되어도 서비스 실행 상태가 유지됨.  
  동작이 끝나면 서비스가 중지됨.
- 바운드 서비스는 액티비티 같은 다른 컴포넌트로 연결됨.  
  액티비티는 바운드 서비스와 상호작용하고 결과를 받을 수 있음.
- 예정된 서비스는 특정 시간에 실행되도록 예정된 서비스임.
- IntentService 클래스를 상속받아 onHandleIntent()를 오버라이드 하고 공새 생성자를 추가하면 시작된 서비스를 간단하게 생성할 수 있음.
- `<service>` 요소를 이용해 AndroidManifest.xml에 서비스를 정의 할 수 있음.
- startService()로 시작된 서비스를 실행할 수 있음.
- 시작된 서비스가 생성되면 onCreate()가 호출되고,  
  이어서 onStartCommand()가 호출됨.  
  서비스가 IntentService라면 별도의 스레드로 onHandleIntent()가 호출됨.  
  서비스 실행이 끝나면 서비스가 종료되기 전에 onDestroy()가 호출됨.
- IntentService 클래스는 Service 클래스에서 생명주기 메소드를 상속 받음.
- Android.util.log 클래스를 이용해 메세지를 로깅함. 로긴한 메세지는 안드로이드 스튜디오의 로그캣에서 확인할 수 있음.
- 알림은 알림빌더로 생성함.  
  각 알림은 반드시 작은 아이콘, 제목, 최소화 했을 때 소리를 재생하거나 디바이스를 진동시킴.
- 펜딩 인텐트를 알림의 액션으로 추가해서 알림을 클릭했을 때,  
  어떤 액티비티를 실행할 것인지 지정할 수 있음.
- 알림 관리자를 이용해 알림을 보낼 수 있음.  
  안드로이드의 알림 서비스로 알림 관리자를 생성함.